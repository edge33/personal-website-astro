---
import plainwhiteConfig from '../plainwhite.config';
const {
    plainwhite: { analytics_id },
} = plainwhiteConfig;
---

<script is:inline define:vars={{ analytics_id }}>
    if (!analytics_id) {
        return;
    }
    const script = document.createElement('script');
    script.async = true;
    script.src = `https://www.googletagmanager.com/gtag/js?id=${analytics_id}`;
    document.body.appendChild(script);

    window.dataLayer = window.dataLayer || [];
    function gtag() {
        // eslint-disable-next-line prefer-rest-params
        window.dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', `${analytics_id}`);
    gtag();
</script>
